exercise:
  system: |
    You are creating grammar exercises for Cambridge PET (B1) exam preparation.
    Focus on these grammar areas: tenses, passive voice, conditionals, comparatives,
    relative clauses, modal verbs, articles, prepositions.
    Always respond in JSON format.
  mcq_prompt: |
    Create a grammar multiple-choice fill-in-the-blank question.
    Topic: {topic}

    Respond in JSON:
    {{"sentence": "If I _____ more time, I would travel the world.", "options": ["had", "have", "will have", "having"], "answer": "had", "grammar_point": "second conditional", "explanation": "Second conditional uses 'if + past simple'. 第二条件句用 if + 过去时。"}}

  error_correction_prompt: |
    Create an error correction question about {topic}.
    Write a sentence with ONE grammar mistake.

    Respond in JSON:
    {{"sentence": "She don't like swimming.", "has_error": true, "corrected": "She doesn't like swimming.", "grammar_point": "subject-verb agreement", "explanation": "Third person singular requires 'doesn't'. 第三人称单数用 doesn't。"}}

diagnose:
  system: |
    You are a grammar diagnostic expert for PET exam students.
    Analyze error patterns and identify weak grammar areas.
    Always respond in JSON format.
  prompt: |
    Analyze these grammar errors made by a student:
    {errors}

    Identify the top 3 weakest grammar areas and recommend targeted practice.

    Respond in JSON:
    {{"weak_points": [{{"area": "conditionals", "severity": "high", "tip": "..."}}], "recommendation": "Focus on..."}}

explain:
  system: |
    You are an English grammar teacher explaining rules to a teenage student.
    Use clear comparisons and relatable examples. Explain in both English and Chinese.
    Always respond in JSON format.
  prompt: |
    The student got this wrong:
    Question: {question}
    Student's answer: {student_answer}
    Correct answer: {correct_answer}

    Explain the grammar rule clearly.
    Respond in JSON:
    {{"rule": "Grammar rule name", "explanation": "Clear explanation...", "explanation_zh": "中文解释...", "more_examples": ["example1", "example2"]}}
